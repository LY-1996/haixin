"use strict";var fh=document.querySelector(".fh");window.onscroll=function(){var n=document.body.scrollTop||document.documentElement.scrollTop;fh.onclick=function(){var t=setInterval(function(){(n=0)<=0&&clearInterval(t),document.documentElement.scrollTop=n},50)}};var box=document.querySelector(".ee"),login1=getCookie("login1"),cartList=JSON.parse(localStorage.getItem("cartList"))||[];function show1(){if(login1)if(0<cartList.length){var t=cartList.length;$(".gwc-icon").html(t);var n=cartList.length;$(".gwc-icon2 span").html(n);var e=cartList.every(function(t){return 1==t.is_select}),a=fn1(),s='\n                <div class="sc-body">\n                    <div class="scbox-top">\n                        <h4 class="top_1"><input type="checkbox" name="quanxuan" '+(e?"checked":"")+">全选</h4>\n                        <h4>商品信息</h4>\n                        <h4>价格(元)</h4>\n                        <h4>数量</h4>\n                        <h4>小计(元)</h4>\n                        <h4>操作</h4>\n                </div>";cartList.forEach(function(t){s+='\n                <div class="scbox-con" data-id="'+t.id+'">\n                    <h4 class="top_1">\n                        <input type="checkbox" '+(1==t.is_select?"checked":"")+' name="xuan">\n                        <img src="'+t.img1+'" alt="">\n                        <a href="xiangqing.html?id='+t.id+'"><p class="tit">'+t.title1+'</p></a>\n                    </h4>\n                    <h4 class="djj">￥<span class="dan">'+t.price+'</span></h4>\n                    <h4>\n                        <input class="aa" id="del" type="button" value="-"'+(1==t.cart_number?"disabled":"")+'>\n                        <input class="cc" type="text" name="wenben" value="'+t.cart_number+'">\n                        <input class="aa" type="button" value="+" '+(t.cart_number==t.goods_number?"disabled":"")+' id="add">\n                    </h4>\n                        <h4 class="je">￥<span class="jee">'+t.price+'</span></h4>\n                    <h4 class="sc">\n                        <input type="button" value="删除" class="bb" id="delete">\n                    </h4>\n                </div>'}),s+='\n                    <div class="sc-foot">\n                        <div class="sc-foot_con">\n                            <fieldset>\n                            <div class="qs">\n                                <div class="select">\n                                    <input type="checkbox" class="check1" name="quanxuan" '+(e?"checked":"")+'>\n                                    <span>全选</span>\n                                    <p class="xz" id=\'clear\'>清空购物车</p>\n                                </div>\n                            </div>\n                        <div class="yx">\n                            <span class="yxsp">已选<em>'+a[0]+'</em>件商品</span>\n                        <div class="hj">合计(不含运费)&nbsp;&nbsp;&nbsp;\n                            <span class="price">￥<b>'+a[1]+'</b></span>\n                        </div>\n                    </div>\n                    <div class="js"><button   id="jiesuan">去结算</button></div>\n                    </fieldset>\n                </div>\n            </div>\n        </div>\n    </div>',$(".ee").html(s)}else{box.innerHTML='\n            <div class="shopp-con">\n                <div class="shopp_wrap">\n                    <div class="show-img">\n                        <span>暂无添加的商品</span>\n                    </div>\n                </div>\n                <div class="shopp-btn">\n                    <a href="../html/index.html">马上去购物</a>\n                </div>\n            </div>';t=cartList.length;$(".gwc-icon").html(t);n=cartList.length;$(".gwc-icon2 span").html(n)}else{alert("您还没有登录，请登录之后再跳转");var c=location.href;location.href="denglu.html?pathname="+c}}function fn1(){var n=0,e=0;return cartList.forEach(function(t){1==t.is_select&&(n+=parseInt(t.cart_number),e+=parseInt(t.cart_number)*parseFloat(t.price))}),[n,e]}show1(),$(".ee").click(function(t){var n=(t=t||window.event).target||t.srcElement;if("add"==n.id){var e=n.parentNode.parentNode.getAttribute("data-id");cartList.forEach(function(t){t.id==e&&(t.cart_number=t.cart_number===t.goods_number?t.goods_number:t.cart_number-0+1)}),localStorage.setItem("cartList",JSON.stringify(cartList)),show1()}if("del"==n.id){e=n.parentNode.parentNode.getAttribute("data-id");var a=!0,s=!1,c=void 0;try{for(var i,r=cartList[Symbol.iterator]();!(a=(i=r.next()).done);a=!0){var o=i.value;if(o.id==e){console.log(1),o.cart_number=1===o.cart_number?1:o.cart_number-1;break}}}catch(t){s=!0,c=t}finally{try{!a&&r.return&&r.return()}finally{if(s)throw c}}localStorage.setItem("cartList",JSON.stringify(cartList)),show1()}if("delete"==n.id){e=n.parentNode.parentNode.getAttribute("data-id");cartList=cartList.filter(function(t){return t.id!=e}),localStorage.setItem("cartList",JSON.stringify(cartList)),show1()}if("quanxuan"==n.name&&(cartList.forEach(function(t){t.is_select=n.checked?1:0}),localStorage.setItem("cartList",JSON.stringify(cartList)),show1()),"xuan"==n.name){e=n.parentNode.parentNode.getAttribute("data-id");cartList.forEach(function(t){t.id==e&&(t.is_select=1==t.is_select?0:1)}),localStorage.setItem("cartList",JSON.stringify(cartList)),show1()}if("jiesuan"==n.id){var l=fn1()[1];0<l?(alert("您支付了￥"+l+"钱"),cartList=cartList.filter(function(t){return 1!=t.is_select})):alert("请购选产品"),localStorage.setItem("cartList",JSON.stringify(cartList)),show1()}"clear"==n.id&&(localStorage.clear(),cartList=JSON.parse(localStorage.getItem("cartList"))||[],show1())});